<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Post</title>
  <style>
    .content-section {
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 20px;
      background-color:#f5f5f5;
    }
    .content-section h3 {
      margin-top: 0;
    }
    .sponsored-section {
      display: none;
      margin-top: 20px;
      border: 1px solid #ccc;
      padding: 10px;
    }
  </style>
</head>
<body>
  <h1 style="text-align: center; font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;">Create a New Post</h1>

  <form id="createPostForm" enctype="multipart/form-data" method="post" action="/api/posts/create" style="width: 70%; justify-self: center; border: 1px solid rgb(224, 224, 224); padding: 20px; border-radius: 10px;">

    <!-- Main Post Section -->
     <div style="display: flex; flex-direction: column;">
       <label for="postHeading" style="font-size: 18px;">Post Heading</label>
       <input type="text" id="postHeading" name="postHeading" required style="border: 1px solid black; border-radius: 5px; padding: 8px;"><br><br>
     </div>

     <div style="display: flex; flex-direction: column;">
      <label for="subheading" style="font-size: 18px;">Subheading</label>
      <input type="text" id="subheading" name="subheading" style="border: 1px solid black; border-radius: 5px; padding: 8px;"><br><br>
    </div>

    <label for="category" style="font-size: 18px;">Category</label>
    <select id="category" name="category" required style="padding: 5px;font-size: 15px;">
      <option value="" style="font-size: 15px;">Select a Category</option>
      <option value="marketing" style="font-size: 15px;">Marketing</option>
      <option value="advertising" style="font-size: 15px;">Advertising</option>
      <option value="market trends" style="font-size: 15px;">Market Trends</option>
      <option value="tech moves" style="font-size: 15px;">Tech Moves</option>
      <option value="startups" style="font-size: 15px;">Startups</option>
    </select><br><br>


    <label for="imagePost" style="font-size: 18px;">Image Post</label>
    <input type="file" id="imagePost" name="imagePost"><br><br>

    <div style="display: flex; flex-direction: column; width: 30%;">
      <label for="createdBy" style="font-size: 18px;">Created By</label>
      <input type="text" id="createdBy" name="createdBy" required style="border: 1px solid black; border-radius: 5px; padding: 8px;"><br><br>
    </div>

    <div style="display: flex; flex-direction: column; width: 30%;">
      <label for="designation" style="font-size: 18px;">Designation</label>
      <input type="text" id="designation" name="designation" required style="border: 1px solid black; border-radius: 5px; padding: 8px;"><br><br>
    </div>

    <div style="display: flex; flex-direction: column;">
      <label for="description" style="font-size: 18px;">Post Description</label>
      <textarea id="description" name="description" rows="4" required style="border: 1px solid black; border-radius: 5px; padding: 8px;"></textarea><br><br>
    </div>

    <!-- Sponsored Section -->
    <label for="isSponsored" style="font-size: 18px;">Is Sponsored?</label>
    <select id="isSponsored" name="isSponsored" onchange="toggleSponsoredSection()" style="font-size: 15px;">
      <option value="false" style="font-size: 15px;">No</option>
      <option value="true" style="font-size: 15px;">Yes</option>
    </select><br><br>

    <div id="sponsoredSection" class="sponsored-section">
      <h3>Sponsored Details</h3>
      <label for="sponsoredBy">Sponsored By</label>
      <input type="text" id="sponsoredBy" name="sponsoredBy"><br><br>

      <label for="companyName">Company Name</label>
      <input type="text" id="companyName" name="companyName"><br><br>

      <label for="companyLogo">Company Logo</label>
      <input type="file" id="companyLogo" name="companyLogo"><br><br>
    </div>

    <!-- Dynamic Content Section -->
    <h3>Content Section</h3>
    <div id="contentSections">
      <!-- Initial Content Section -->
      <div class="content-section" id="contentSection1">
        <div style="display: flex; flex-direction: column;">
          <label for="contentHeading1" style="font-size: 18px;">Content Heading</label>
          <input type="text" id="contentHeading1" name="contentHeading[]" style="border: 1px solid black; border-radius: 5px; padding: 8px;"><br><br>
        </div>

        <div style="display: flex; flex-direction: column;">
          <label for="contentDescription1" style="font-size: 18px;">Content Description</label>
          <textarea id="contentDescription1" name="contentDescription[]" rows="4" style="border: 1px solid black; border-radius: 5px; padding: 8px;"></textarea><br><br>
        </div>

        <label for="contentType1" style="font-size: 18px;">Content Type</label>
        <select id="contentType1" name="contentType[]" onchange="toggleContentTypeFields(this)" style="font-size: 15px;">
          <option value="" style="font-size: 15px;">Select Content Type</option>
          <option value="image" style="font-size: 15px;">Image</option>
          <option value="list" style="font-size: 15px;">List</option>
          <option value="quote" style="font-size: 15px;">Quote</option>
        </select><br><br>

        <div class="image-option" id="imageOption1" style="display:none;">
          <label for="imageUpload1">Upload Image</label>
          <input type="file" id="imageUpload1" name="imageUpload1" multiple><br><br>
        </div>

        <div class="list-option" id="listOption1" style="display:none;">
          <label>List Items</label>
          <div id="listItems1">
            <input type="text" name="listItems[0][]" placeholder="Enter List Item"><br><br>
          </div>
          <button type="button" onclick="addListItem(1)">Add More List Items</button><br><br>
        </div>

        <div class="quote-option" id="quoteOption1" style="display:none;">
          <label for="quoteText1">Quote</label>
          <input type="text" id="quoteText1" name="quoteText[]"><br><br>

          <label for="quoteAuthor1">Created By</label>
          <input type="text" id="quoteAuthor1" name="quoteAuthor[]"><br><br>
        </div>

        <button type="button" onclick="removeContentSection(1)">Remove Content Section</button><br><br>
      </div>
    </div>

    <button type="button" onclick="addContentSection()" style="border: 1px solid gray; background-color: transparent;">Add New Content Section</button><br><br>
    <button type="submit" style="padding: 5px 50px; background-color: #C2FF74; border: none; justify-self:right; font-weight: 600;">Submit</button>
  </form>

  <script>
    let contentSectionCount = 1;

    function toggleSponsoredSection() {
      const isSponsored = document.getElementById('isSponsored').value;
      const sponsoredSection = document.getElementById('sponsoredSection');
      sponsoredSection.style.display = isSponsored === 'true' ? 'block' : 'none';
    }

    function toggleContentTypeFields(selectElement) {
      const contentSection = selectElement.closest('.content-section');
      const imageOption = contentSection.querySelector('.image-option');
      const listOption = contentSection.querySelector('.list-option');
      const quoteOption = contentSection.querySelector('.quote-option');

      // Hide all options
      imageOption.style.display = 'none';
      listOption.style.display = 'none';
      quoteOption.style.display = 'none';

      // Show selected option
      if (selectElement.value === 'image') {
        imageOption.style.display = 'block';
      } else if (selectElement.value === 'list') {
        listOption.style.display = 'block';
      } else if (selectElement.value === 'quote') {
        quoteOption.style.display = 'block';
      }
    }

    function addContentSection() {
      contentSectionCount++;
      const newSection = document.createElement('div');
      newSection.classList.add('content-section');
      newSection.id = `contentSection${contentSectionCount}`;
      newSection.innerHTML = `
        <!-- Dynamic content code -->
        <div style="display: flex; flex-direction: column;">
        <label for="contentHeading${contentSectionCount}" style="font-size: 18px;">Content Heading</label>
        <input type="text" id="contentHeading${contentSectionCount}" name="contentHeading[]" style="border: 1px solid black; border-radius: 5px; padding: 8px;"><br><br>
        </div>

        <div style="display: flex; flex-direction: column;">
        <label for="contentDescription${contentSectionCount}" style="font-size: 18px;">Content Description</label>
        <textarea id="contentDescription${contentSectionCount}" name="contentDescription[]" rows="4" style="border: 1px solid black; border-radius: 5px; padding: 8px;"></textarea><br><br>
        </div>

        <label for="contentType${contentSectionCount}" style="font-size: 18px;">Content Type</label>
        <select id="contentType${contentSectionCount}" name="contentType[]" onchange="toggleContentTypeFields(this)" style="font-size: 15px;">
          <option value="" style="font-size: 15px;">Select Content Type</option>
          <option value="image" style="font-size: 15px;">Image</option>
          <option value="list" style="font-size: 15px;">List</option>
          <option value="quote" style="font-size: 15px;">Quote</option>
        </select><br><br>

        <div class="image-option" id="imageOption${contentSectionCount}" style="display:none;">
          <label for="imageUpload${contentSectionCount}">Upload Image</label>
          <input type="file" id="imageUpload${contentSectionCount}" name="imageUpload${contentSectionCount}" multiple><br><br>
        </div>

        <div class="list-option" id="listOption${contentSectionCount}" style="display:none;">
          <label>List Items</label>
          <div id="listItems${contentSectionCount}">
            <input type="text" name="listItems[${contentSectionCount - 1}][]" placeholder="Enter List Item"><br><br>
          </div>
          <button type="button" onclick="addListItem(${contentSectionCount})">Add More List Items</button><br><br>
        </div>

        <div class="quote-option" id="quoteOption${contentSectionCount}" style="display:none;">
          <label for="quoteText${contentSectionCount}">Quote</label>
          <input type="text" id="quoteText${contentSectionCount}" name="quoteText[]"><br><br>

          <label for="quoteAuthor${contentSectionCount}">Created By</label>
          <input type="text" id="quoteAuthor${contentSectionCount}" name="quoteAuthor[]"><br><br>
        </div>

        <button type="button" onclick="removeContentSection(${contentSectionCount})">Remove Content Section</button><br><br>
      `;
      document.getElementById('contentSections').appendChild(newSection);
    }

    function removeContentSection(sectionId) {
      const section = document.getElementById(`contentSection${sectionId}`);
      if (section) section.remove();
    }

    function addListItem(sectionId) {
      const listItems = document.getElementById(`listItems${sectionId}`);
      const newItem = document.createElement('input');
      newItem.type = 'text';
      newItem.name = `listItems[${sectionId - 1}][]`;
      newItem.placeholder = 'Enter List Item';
      listItems.appendChild(newItem);
      listItems.appendChild(document.createElement('br'));
      listItems.appendChild(document.createElement('br'));
    }
  </script>
</body>
</html>
